<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>

    <body>
        <h1>Rock Paper Scissors on Console</h1>
        <script>
            function getRandomNumber (min, max) {
                return Math.floor(Math.random() * (max - min + 1) ) + min;
            }

            function getComputerChoice() {
                let randomNumber = getRandomNumber(1, 3);
                let comChoice;

                if (randomNumber == 1) {
                    comChoice = "rock";
                }
                else if (randomNumber == 2) {
                    comChoice = "paper";
                }
                else if (randomNumber == 3) {
                    comChoice = "scissors";
                }
                else {
                    return "Random Number Generation is not as expected"
                }
                return comChoice;
            }

            function playGame (playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase().trim();
                let message;
                let winner;
                
                if (playerSelection === computerSelection) {
                    message = `Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `It's a tie.`;   
                }
                else if (playerSelection === "rock" && computerSelection === "paper") {
                    winner = "computer";
                    message = `Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `You've lost. Paper beats rock.`;   
                }
                else if (playerSelection === "rock" && computerSelection === "scissors") {
                    winner = "player";
                    message = `Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +                
                    `You've won! Rock beats scissors.`;    
                }
                else if (playerSelection === "paper" && computerSelection === "rock") {
                    winner = "player";
                    message = `Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `You've won! Paper beats rock.`;    
                }
                else if (playerSelection === "paper" && computerSelection === "scissors") {
                    winner = "computer";
                    message = `Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `You've lost. Scissors beats paper.`;    
                }
                else if (playerSelection === "scissors" && computerSelection === "rock") {
                    winner = "computer";
                    message =`Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `You've lost. Rock beats scissors.`;    
                }
                else if (playerSelection === "scissors" && computerSelection === "paper") {
                    winner = "player";
                    message =`Computer's choice: ${computerSelection}\n` +
                    `Your choice: ${playerSelection}\n` +
                    `You've won! Scissors beats paper.`;     
                }
                else {
                    message = "Some type of error occurred."; 
                }

                const result = {
                    message,
                    winner
                };

                return result;
            }

            function fiveRoundsGame() {
                let computerScore = 0;
                let playerScore = 0;

                for (let i = 0; i < 5; i++) {
                    let result = playGame(prompt("Rock, Paper, Scissors?", " "), getComputerChoice() );
                    console.log(result.message);
                    if (result.winner == "computer") {
                        computerScore += 1;
                    }
                    else if (result.winner == "player") {
                        playerScore += 1;
                    }

                    console.log(`Scores:\nComputer ${computerScore}\nYou: ${playerScore}`);
                }

                if (playerScore > computerScore) {
                    console.log("Congratz. You've won the game!");
                }
                else if (computerScore > playerScore) {
                    console.log("Sorry. You've lost the game.");
                }
                else {
                    console.log("Game ended in a tie.")
                }

            };

            fiveRoundsGame();          
        </script>
    </body>
</html>